## Arbuz API (все про структуру БД, дополнительные функций, поток данных)
<p> Использовано: <br>
PHP 8.1.2 <br>
Laravel 8 <br>
MySQL</p>
<p align="center"><a href="https://drawsql.app/teams/poklas/diagrams/arbuz" target="_blank"><img src="https://www.imagehost.at/images/2023/05/23/drawSQL-arbuz-export-2023-05-23.png" width="80%" alt="MySQL DB structure"></a></p>

<p align="center">
<a href="https://drawsql.app/teams/poklas/diagrams/arbuz">Если картины не видно, то можете найти структуру БД тут</a>
</p>

### Postman Link: https://www.postman.com/poklas/workspace/arbuz/collection/21766612-80f3e40b-6c7b-43a8-9b1d-c8121d78fe85?action=share&creator=21766612
## Какие функций сделаны, кроме минимальных требований?
- Введена функция отслеживания доставки, которая позволяет пользователям узнать статус своей посылки и ожидаемое время доставки.
- Разработана система планирования доставок, которая учитывает выбранный день недели и предпочтения пользователя по времени доставки.
- Создана таблица для отслеживания всех доставок, где даты доставок определяются на основе дня недели. Для реализации этой функциональности была использована библиотека Carbon.
- В таблице доставок создается новая запись только после того, как заказ предыдущей недели был доставлен. Это обеспечивает систематический и организованный процесс доставки и записи данных.
- Созданы разные фильтры для почти всех таблиц, на основе ID, категорий и статуса. 
- Добавлена возможность продления подписки еще на месяц, что обеспечит бесперебойную работу пользователей.

## Поток данных между таблицами
#### Пользователь добавляет товар в корзину:
- Информация о товаре и его количестве сохраняется в виде элемента "cart item" в таблице "carts"
- Количество товара в наличии уменьшается в таблице "products"
#### Пользователь переходит к оформлению заказа:
- Элементы из корзины пользователя передаются в таблицу "orders" и "order items"
- Заказы содержат информацию о товарах, их количестве и цене
#### Пользователь создает подписку:
- Детали подписки, такие как предпочитаемый день недели и временной слот, сохраняются в таблице "subscriptions"
- Создается первая запись о доставке в таблице "deliveries" на основе предпочитаемого дня недели
- Запись о доставке включает идентификатор подписки, запланированную дату доставки, временной слот и начальный статус доставки
- Дата доставки рассчитывается на основе предпочитаемого дня недели и сохраняется в таблице.
- При изменений статуса на "delivered" создается запись о следующей доставке, которая должна будет произойти через неделю с момента предыдущей доставки
#### Статус доставки изменяется на "доставлено":
- Создается новая запись о доставке на следующую неделю в таблице "доставки"
- Создается новая запись о следующей доставке, которая запланирована на неделю после предыдущей доставки
- Это позволяет поддерживать регулярность доставок и постепенность записи данных
